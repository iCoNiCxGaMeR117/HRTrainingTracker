@{
    ViewData["Title"] = "Training Editor";
}

@model Training
<div class="row justify-content-center">
    <div class="col-3 text-center my-auto">
        <a class="btn btn-outline-danger buttonload" asp-area="" asp-controller="Home" asp-action="TrainingManager">Back</a>
    </div>
    <div class="col-auto"></div>
    <div class="col-4 text-center">
        <hr />
        <h2>Training Editor</h2>
        <hr />
        @if (!string.IsNullOrEmpty((string)TempData.Peek("Error")))
        {
            <p class="text-danger">@TempData["Error"].ToString()</p>
        }
    </div>
    <div class="col-auto"></div>
    <div class="col-3 text-center my-auto">

    </div>
</div>

<ul class="nav nav-tabs justify-content-center" id="TrainingEditorTabs" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="gen-info-tab" data-toggle="tab" href="#GenInfo" role="tab" aria-controls="GeneralInformation" aria-selected="true">General Info</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="employee-tab" data-toggle="tab" href="#Employees" role="tab" aria-controls="EmployeeDetails" aria-selected="false">Employee Details</a>
    </li>
</ul>
<br />
<br />

<div class="tab-content" id="TrainingEditorContent">
    <div class="tab-pane fade show active" id="GenInfo" role="tabpanel" aria-labelledby="gen-info-tab">
        @using (Html.BeginForm("TrainingSaver", "TrainingInsights", FormMethod.Post))
        {
            @Html.HiddenFor(obj => obj.TrainingID)
            @Html.HiddenFor(obj => obj.CreatedDate)
            @Html.HiddenFor(obj => obj.LastModifiedDate)
            @Html.HiddenFor(obj => obj.CreatedByName)
            @Html.HiddenFor(obj => obj.LastModifiedByName)

            <div class="row justify-content-center">
                <div class="col-sm-4 col-10 text-center rounded border">
                    <div class="my-3">
                        <b>Training Name</b>
                        <hr />
                        @Html.EditorFor(obj => obj.TrainingName, new { htmlAttributes = new { @class = "form-control" } })
                    </div>
                </div>
            </div>
            <br />
            <div class="row justify-content-center">
                <div class="col-sm-4 col-10 text-center rounded border">
                    <div class="my-3">
                        <b>Training Date</b>
                        <hr />
                        @Html.EditorFor(obj => obj.TrainingDate, new { htmlAttributes = new { @class = "form-control" } })
                    </div>
                </div>
                <div class="col-sm-auto col-12">
                    <br />
                </div>
                <div class="col-sm-4 col-10 text-center rounded border">
                    <div class="my-3">
                        <b>Expiration Date</b>
                        <hr />
                        @Html.EditorFor(obj => obj.TrainingExpiration, new { htmlAttributes = new { @class = "form-control" } })
                    </div>
                </div>
            </div>
            <br />
            <div class="row justify-content-center">
                <div class="col-sm-4 col-10 text-center rounded border">
                    <div class="my-3">
                        <b>Expired Flag</b>
                        <hr />
                        @Html.CheckBoxFor(obj => obj.Expired)
                    </div>
                </div>
            </div>
            <br />
            <div class="row justify-content-center">
                <div class="col-sm-4 col-10 text-center rounded border">
                    <div class="my-3">
                        <b>Trainer Name</b>
                        <hr />
                        @Html.EditorFor(obj => obj.TrainerName, new { htmlAttributes = new { @class = "form-control" } })
                    </div>
                </div>
                <div class="col-sm-auto col-12">
                    <br />
                </div>
                <div class="col-sm-4 col-10 text-center rounded border">
                    <div class="my-3">
                        <b>Training Type</b>
                        <hr />
                        @Html.DropDownListFor(obj => obj.TrainingType.TrainingTypesID, Model.TrainingTypesList, new { @class = "form-control" })
                    </div>
                </div>
            </div>
            <br />
            <div class="row justify-content-center">
                <div class="col-sm-4 col-10 text-center rounded border">
                    <div class="my-3">
                        <b>Locality</b>
                        <hr />
                        @Html.DropDownListFor(obj => obj.Locality.LocalID, Model.LocalitiesList, new { @class = "form-control" })
                    </div>
                </div>
            </div>
            <hr />
            <div class="row justify-content-center">
                <div class="col text-center">
                    <button class="btn btn-outline-success">Save Changes</button>
                </div>
            </div>
        }
    </div>
    <div class="tab-pane fade" id="Employees" role="tabpanel" aria-labelledby="employee-tab">
        <div class="row justify-content-center">
            <div class="col-3 text-center my-auto">
                <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#AttachEmployeeModal">
                    Attach Employee
                </button>
            </div>
            @using (Html.BeginForm("AttachEmployeeToTraining", "TrainingInsights", FormMethod.Post))
            {
                @Html.HiddenFor(obj => obj.TrainingID)
                <div class="modal fade" id="AttachEmployeeModal" tabindex="-1" role="dialog" aria-labelledby="Attach Employee" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header text-center">
                                <h5 class="modal-title">Attach Employee</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row justify-content-center">
                                    <div class="col-12 text-center table-responsive">
                                        <table class="table AttachEmployeeDataTable table-bordered table-striped">
                                            <thead>
                                                <tr>
                                                    <th class="my-auto text-center"></th>
                                                    <th class="my-auto text-center">Last Name</th>
                                                    <th class="my-auto text-center">First Name</th>
                                                    <th class="my-auto text-center">Dept</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in Model.AttachEmployeeList)
                                                {
                                                    <tr>
                                                        <td><button class="btn btn-outline-primary" name="emplId" value="@item.EmployeeID">Attach</button></td>
                                                        <td>
                                                            @Html.DisplayFor(obj => item.LastName)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(obj => item.FirstName)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(obj => item.Department.Name)
                                                        </td>
                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer text-center">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
        <h1>IN DEVELOPMENT</h1>
    </div>
</div>
